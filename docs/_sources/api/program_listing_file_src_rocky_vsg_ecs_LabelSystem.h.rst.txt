
.. _program_listing_file_src_rocky_vsg_ecs_LabelSystem.h:

Program Listing for File LabelSystem.h
======================================

|exhale_lsh| :ref:`Return to documentation for file <file_src_rocky_vsg_ecs_LabelSystem.h>` (``src/rocky/vsg/ecs/LabelSystem.h``)

.. |exhale_lsh| unicode:: U+021B0 .. UPWARDS ARROW WITH TIP LEFTWARDS

.. code-block:: cpp

   
   #pragma once
   #include <rocky/ecs/Label.h>
   #include <rocky/ecs/Widget.h>
   #include <rocky/Rendering.h>
   #include <rocky/vsg/ecs/ECSNode.h>
   
   #ifdef ROCKY_HAS_IMGUI
   #include <rocky/rocky_imgui.h>
   
   namespace ROCKY_NAMESPACE
   {
       class ROCKY_EXPORT LabelSystem : public rocky::Inherit<System, LabelSystem>
       {
       public:
           LabelSystem(Registry& registry);
   
           void initialize(VSGContext&) override;
   
           void update(VSGContext&) override;
   
       protected:
           struct ImFontContainer {
               ImFont* font = nullptr;
           };
           using FontByName = std::unordered_map<std::string, ImFontContainer>;
           using FontSetPerContext = std::unordered_map<ImGuiContext*, FontByName>;
           FontSetPerContext _fontsCache;
   
           std::function<void(WidgetInstance&)> _renderFunction;
           entt::entity _defaultStyleEntity = entt::null;
   
           void on_construct_Label(entt::registry& r, entt::entity e);
           void on_update_Label(entt::registry& r, entt::entity e);
           void on_destroy_Label(entt::registry& r, entt::entity e);
           void on_construct_LabelStyle(entt::registry& r, entt::entity e);
           void on_update_LabelStyle(entt::registry& r, entt::entity e);
           void on_destroy_LabelStyle(entt::registry& r, entt::entity e);
   
           ImFont* getOrCreateFont(const std::string&, ImGuiContext*);
       };
   
       namespace detail
       {
           struct LabelStyleDetail
           {   
               std::string fontName;
               ViewLocal<ImFont*> fonts;
   
               LabelStyleDetail() {
                   fonts.fill(nullptr);
               }
           };
       }
   }
   
   #endif // ROCKY_HAS_IMGUI
