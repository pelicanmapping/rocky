
.. _program_listing_file_src_rocky_vsg_ecs_NodeGraphSystem.h:

Program Listing for File NodeGraphSystem.h
==========================================

|exhale_lsh| :ref:`Return to documentation for file <file_src_rocky_vsg_ecs_NodeGraphSystem.h>` (``src/rocky/vsg/ecs/NodeGraphSystem.h``)

.. |exhale_lsh| unicode:: U+021B0 .. UPWARDS ARROW WITH TIP LEFTWARDS

.. code-block:: cpp

   
   #pragma once
   #include <rocky/vsg/ecs/ECSNode.h>
   #include <rocky/vsg/ecs/ECSTypes.h>
   
   namespace ROCKY_NAMESPACE
   {
       struct TransformDetail;
   
       class ROCKY_EXPORT NodeSystemNode : public vsg::Inherit<detail::SimpleSystemNodeBase, NodeSystemNode>
       {
       public:
           NodeSystemNode(Registry& registry);
   
           ~NodeSystemNode();
   
           void initialize(VSGContext&) override;
   
           void update(VSGContext&) override;
   
           void traverse(vsg::RecordTraversal&) const override;
   
           void traverse(vsg::ConstVisitor& v) const override;
   
           // vsg::Compilable
           void compile(vsg::Context& cc) override;
   
       private:
           mutable vsg::ref_ptr<vsg::MatrixTransform> _tempMT;
   
           // render leaf for collecting and drawing meshes
           struct Drawable
           {
               vsg::Node* node = nullptr;
               TransformDetail* xformDetail = nullptr;
               Drawable(vsg::Node* node_, TransformDetail* xformDetail) : node(node_), xformDetail(xformDetail) {}
           };
   
           using DrawList = std::vector<Drawable>;
           mutable DrawList _drawList;
   
           void on_construct_NodeGraph(entt::registry& r, entt::entity e);
           void on_update_NodeGraph(entt::registry& r, entt::entity e);
       };
   }
