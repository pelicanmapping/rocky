
.. _program_listing_file_src_rocky_TileLayer.h:

Program Listing for File TileLayer.h
====================================

|exhale_lsh| :ref:`Return to documentation for file <file_src_rocky_TileLayer.h>` (``src/rocky/TileLayer.h``)

.. |exhale_lsh| unicode:: U+021B0 .. UPWARDS ARROW WITH TIP LEFTWARDS

.. code-block:: cpp

   
   #pragma once
   
   #include <rocky/Common.h>
   #include <rocky/IOTypes.h>
   #include <rocky/VisibleLayer.h>
   #include <rocky/Profile.h>
   #include <rocky/TileKey.h>
   #include <map>
   
   namespace ROCKY_NAMESPACE
   {
       class GeoImage;
   
       class ROCKY_EXPORT TileLayer : public Inherit<VisibleLayer, TileLayer>
       {
       public:
   
           option<unsigned> minLevel = 0u;
   
           option<unsigned> maxLevel = 99u;
   
           option<unsigned> maxDataLevel = 99u;
   
           option<unsigned> tileSize = 256u;
   
           option<GeoExtent> crop;
   
           Profile profile;
   
           std::string to_json() const override;
   
       protected:
   
           TileLayer();
   
           TileLayer(std::string_view);
   
       public:
   
           void setPermanentProfile(const Profile&);
   
           bool intersects(const TileKey& key) const;
   
           virtual TileKey bestAvailableTileKey(const TileKey& key) const;
   
           virtual bool mayHaveData(const TileKey& key) const;
   
           virtual bool isKeyInConfiguredRange(const TileKey& key) const;
   
           virtual const DataExtentList& dataExtents() const;
   
           const DataExtent& dataExtentsUnion() const;
   
       public: // Layer
   
           const GeoExtent& extent() const override;
   
       protected: // Layer
   
           Result<> openImplementation(const IOOptions&) override;
           
           void closeImplementation() override;
   
           void setDataExtents(const DataExtentList& dataExtents);
   
           // Checks a cache for an image, and if not found, calls the create function to generate it.
           Result<GeoImage> getOrCreateTile(const TileKey& key, const IOOptions& io,
               std::function<Result<GeoImage>()>&& create) const;
   
       protected:
   
           option<Profile> _originalProfile; // profile specified in the options
   
       private:
           // Post-ctor
           void construct(std::string_view);
   
           // available data extents.
           DataExtentList _dataExtents;
           DataExtent _dataExtentsUnion;
           struct DataExtentsIndex;
           std::shared_ptr<DataExtentsIndex> _dataExtentsIndex;
   
           // methods accesible by Map:
           friend class Map;
       };
   }
