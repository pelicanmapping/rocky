
.. _program_listing_file_src_rocky_vsg_NodeLayer.cpp:

Program Listing for File NodeLayer.cpp
======================================

|exhale_lsh| :ref:`Return to documentation for file <file_src_rocky_vsg_NodeLayer.cpp>` (``src/rocky/vsg/NodeLayer.cpp``)

.. |exhale_lsh| unicode:: U+021B0 .. UPWARDS ARROW WITH TIP LEFTWARDS

.. code-block:: cpp

   
   #include "NodeLayer.h"
   #include "VSGUtils.h"
   #include "ecs/EntityNode.h"
   #include <rocky/ecs/Visibility.h>
   
   using namespace ROCKY_NAMESPACE;
   
   Result<> NodeLayer::openImplementation(const IOOptions& io)
   {
       util::forEach<EntityNode>(node, [&](EntityNode* entityNode)
           {
               auto [lock, r] = entityNode->registry.write();
               for (auto e : entityNode->entities)
                   r.emplace_or_replace<ActiveState>(e);
           });
   
       return ResultVoidOK;
   }
   
   void NodeLayer::closeImplementation()
   {
       util::forEach<EntityNode>(node, [&](EntityNode* entityNode)
           {
               auto [lock, r] = entityNode->registry.write();
               r.remove<ActiveState>(entityNode->entities.begin(), entityNode->entities.end());
           });
   }
