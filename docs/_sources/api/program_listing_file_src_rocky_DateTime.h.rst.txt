
.. _program_listing_file_src_rocky_DateTime.h:

Program Listing for File DateTime.h
===================================

|exhale_lsh| :ref:`Return to documentation for file <file_src_rocky_DateTime.h>` (``src/rocky/DateTime.h``)

.. |exhale_lsh| unicode:: U+021B0 .. UPWARDS ARROW WITH TIP LEFTWARDS

.. code-block:: cpp

   
   #pragma once
   
   #include <rocky/Common.h>
   #include <ctime>
   #include <string>
   
   namespace ROCKY_NAMESPACE
   {
       using TimeStamp = std::int64_t;
   
       using TimeSpan = long;
   
       class ROCKY_EXPORT DateTime
       {
       public:
           DateTime();
   
           DateTime(const DateTime& rhs);
   
           DateTime(const ::tm& tm);
   
           DateTime(TimeStamp utc);
   
           DateTime(int year, int month, int day, double hours);
   
           DateTime(int year, double dayOfYear);
   
           DateTime(const std::string& iso8601);
   
           const std::string asRFC1123() const;
   
           const std::string asISO8601() const;
   
           const std::string asCompactISO8601() const;
   
           double getJulianDay() const;
   
           TimeStamp asTimeStamp() const { return _time_t; }
   
           DateTime operator + (double hours) const;
   
           bool operator < (const DateTime& rhs) const {
               return asTimeStamp() < rhs.asTimeStamp();
           }
   
           bool operator > (const DateTime& rhs) const {
               return asTimeStamp() > rhs.asTimeStamp();
           }
   
           bool operator == (const DateTime& rhs) const {
               return asTimeStamp() == rhs.asTimeStamp();
           }
   
       public:
           int    year()  const;
           int    month() const;
           int    day()   const;
           double hours() const;
   
       protected:
           ::tm     _tm;
           ::time_t _time_t;
   
       private:
           // since timegm is not cross-platform
           ::time_t timegm(const ::tm* tm) const;
           void parse(const std::string& in);
       };
   
   
       class ROCKY_EXPORT DateTimeExtent
       {
           public:
               DateTimeExtent() : _valid(false)
               {
                   //nop
               }
   
               DateTimeExtent(const DateTime& start, const DateTime& end) :
                   _start(start), _end(end), _valid(true)
               {
                   //nop
               }
   
               const bool valid() const {
                   return _valid;
               }
   
               const DateTime& getStart() const {
                   return _start;
               }
   
               const DateTime& getEnd() const {
                   return _end;
               }
   
               void expandBy(const DateTime& value);
   
           private:
               bool _valid;
               DateTime _start;
               DateTime _end;
       };
   
   } // namespace ROCKY_NAMESPACE
   
