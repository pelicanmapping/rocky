
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
      
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.18">
    
    
      
        <title>class future - Rocky</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.7e37652d.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#class-future" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="Rocky" class="md-header__button md-logo" aria-label="Rocky" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Rocky
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              class future
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="Rocky" class="md-nav__button md-logo" aria-label="Rocky" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Rocky
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    API Reference
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            API Reference
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../README.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    API Index
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#records" class="md-nav__link">
    <span class="md-ellipsis">
      Records
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#functions" class="md-nav__link">
    <span class="md-ellipsis">
      Functions
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Functions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#future" class="md-nav__link">
    <span class="md-ellipsis">
      future
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#future_1" class="md-nav__link">
    <span class="md-ellipsis">
      future
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#empty" class="md-nav__link">
    <span class="md-ellipsis">
      empty
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#available" class="md-nav__link">
    <span class="md-ellipsis">
      available
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#working" class="md-nav__link">
    <span class="md-ellipsis">
      working
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#canceled" class="md-nav__link">
    <span class="md-ellipsis">
      canceled
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#value" class="md-nav__link">
    <span class="md-ellipsis">
      value
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#operator-" class="md-nav__link">
    <span class="md-ellipsis">
      operator-&gt;
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#has_value" class="md-nav__link">
    <span class="md-ellipsis">
      has_value
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#release" class="md-nav__link">
    <span class="md-ellipsis">
      release
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#join" class="md-nav__link">
    <span class="md-ellipsis">
      join
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#join_1" class="md-nav__link">
    <span class="md-ellipsis">
      join
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#join_2" class="md-nav__link">
    <span class="md-ellipsis">
      join
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#abandon" class="md-nav__link">
    <span class="md-ellipsis">
      abandon
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#reset" class="md-nav__link">
    <span class="md-ellipsis">
      reset
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#resolve" class="md-nav__link">
    <span class="md-ellipsis">
      resolve
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#resolve_1" class="md-nav__link">
    <span class="md-ellipsis">
      resolve
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#resolve_2" class="md-nav__link">
    <span class="md-ellipsis">
      resolve
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#refs" class="md-nav__link">
    <span class="md-ellipsis">
      refs
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#then_dispatch" class="md-nav__link">
    <span class="md-ellipsis">
      then_dispatch
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#then_dispatch_1" class="md-nav__link">
    <span class="md-ellipsis">
      then_dispatch
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#then_dispatch_2" class="md-nav__link">
    <span class="md-ellipsis">
      then_dispatch
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="class-future">class future</h1>
<p><em>Defined at src/rocky/weejobs.h#293</em></p>
<p>Future holds the future result of an asynchronous operation.</p>
<p>Usage:   Producer (usually an asynchronous function call) creates a future<T>   (the promise of a future result) and immediately returns it. The Consumer   then performs other work, and eventually (or immediately) checks available()   for a result or canceled() for cancelation. If availabile() is true,   Consumer calls value() to fetch the valid result.</p>
<p>As long as at least two equivalent Future object (i.e. Futures pointing to the   same internal shared data) exist, the Future is considered valid. Once   that count goes to one, the Future is either available (the value is ready)   or empty (i.e., canceled or abandoned).</p>
<p>Inherits from cancelable</p>
<h2 id="records">Records</h2>
<p>shared_t</p>
<h2 id="functions">Functions</h2>
<h3 id="future">future<T></h3>
<p><em>public void future<T>()</em></p>
<p><em>Defined at src/rocky/weejobs.h#311</em></p>
<p>Default constructor</p>
<h3 id="future_1">future<T></h3>
<p><em>public void future<T>(const future<T> &amp; rhs)</em></p>
<p><em>Defined at src/rocky/weejobs.h#317</em></p>
<p>Default copy constructor</p>
<h3 id="empty">empty</h3>
<p><em>public _Bool empty()</em></p>
<p><em>Defined at src/rocky/weejobs.h#320</em></p>
<p>True is this Future is unused and not connected to any other Future</p>
<h3 id="available">available</h3>
<p><em>public _Bool available()</em></p>
<p><em>Defined at src/rocky/weejobs.h#326</em></p>
<p>True if the promise was resolved and a result if available.</p>
<h3 id="working">working</h3>
<p><em>public _Bool working()</em></p>
<p><em>Defined at src/rocky/weejobs.h#333</em></p>
<p>True if a promise exists, but has not yet been resolved; Presumably the asynchronous task is still working.</p>
<h3 id="canceled">canceled</h3>
<p><em>public _Bool canceled()</em></p>
<p><em>Defined at src/rocky/weejobs.h#339</em></p>
<p>cancelable interface</p>
<h3 id="value">value</h3>
<p><em>public const T &amp; value()</em></p>
<p><em>Defined at src/rocky/weejobs.h#347</em></p>
<p>Deference the result object. Make sure you check available() to check that the future was actually resolved; otherwise you will just get the default object.</p>
<h3 id="operator-">operator-&gt;</h3>
<p><em>public const T * operator-&gt;()</em></p>
<p><em>Defined at src/rocky/weejobs.h#353</em></p>
<p>Dereference this object to const pointer to the result.</p>
<h3 id="has_value">has_value</h3>
<p><em>public _Bool has_value(const T &amp; arg)</em></p>
<p><em>Defined at src/rocky/weejobs.h#359</em></p>
<p>Result is available AND equal to the argument.</p>
<h3 id="release">release</h3>
<p><em>public T release()</em></p>
<p><em>Defined at src/rocky/weejobs.h#366</em></p>
<p>Same as value(), but if the result is available will reset the future before returning the result object.</p>
<h3 id="join">join</h3>
<p><em>public const T &amp; join()</em></p>
<p><em>Defined at src/rocky/weejobs.h#377</em></p>
<p>Blocks until the result becomes available or the future is abandoned; then returns the result object.</p>
<h3 id="join_1">join</h3>
<p><em>public const T &amp; join(const cancelable * p)</em></p>
<p><em>Defined at src/rocky/weejobs.h#388</em></p>
<p>Blocks until the result becomes available or the future is abandoned or a cancelation flag is set; then returns the result object. Be sure to check canceled() after calling join() to see if the return value is valid.</p>
<h3 id="join_2">join</h3>
<p><em>public const T &amp; join(const cancelable &amp; p)</em></p>
<p><em>Defined at src/rocky/weejobs.h#400</em></p>
<p>Blocks until the result becomes available or the future is abandoned or a cancelation flag is set; then returns the result object. Be sure to check canceled() after calling join() to see if the return value is valid.</p>
<h3 id="abandon">abandon</h3>
<p><em>public void abandon()</em></p>
<p><em>Defined at src/rocky/weejobs.h#406</em></p>
<p>Release reference to a promise, resetting this future to its default state</p>
<h3 id="reset">reset</h3>
<p><em>public void reset()</em></p>
<p><em>Defined at src/rocky/weejobs.h#412</em></p>
<p>synonym for abandon.</p>
<h3 id="resolve">resolve</h3>
<p><em>public void resolve(const T &amp; value)</em></p>
<p><em>Defined at src/rocky/weejobs.h#418</em></p>
<p>Resolve (fulfill) the promise with the provided result value.</p>
<h3 id="resolve_1">resolve</h3>
<p><em>public void resolve(T &amp;&amp; value)</em></p>
<p><em>Defined at src/rocky/weejobs.h#426</em></p>
<p>Resolve (fulfill) the promise with an rvalue</p>
<h3 id="resolve_2">resolve</h3>
<p><em>public void resolve()</em></p>
<p><em>Defined at src/rocky/weejobs.h#434</em></p>
<p>Resolve (fulfill) the promise with a default result</p>
<h3 id="refs">refs</h3>
<p><em>public unsigned int refs()</em></p>
<p><em>Defined at src/rocky/weejobs.h#444</em></p>
<p>The number of objects, including this one, that reference the shared container. If this method returns 1, that means this is the only object with access to the data. This method will never return zero.</p>
<h3 id="then_dispatch">then_dispatch</h3>
<p><em>public future<R> then_dispatch(int func, const context &amp; con)</em></p>
<p>Add a continuation to this future. Instead of the functor returning a value, it will instead have the option of resolving the incoming future/promise object. This is useful for operations that have their own way of running asynchronous code. Note: for some reason when you use this variant you must specific the template argument, e.g. result.then<int>(auto i, promise<int> p)</p>
<h3 id="then_dispatch_1">then_dispatch</h3>
<p><em>public void then_dispatch(int func, const context &amp; con)</em></p>
<p>Add a continuation to this future. The functor only takes an input value and has no return value (fire and forget).</p>
<h3 id="then_dispatch_2">then_dispatch</h3>
<p><em>public future<R> then_dispatch(F func, const context &amp; con)</em></p>
<p><em>Defined at src/rocky/weejobs.h#1072</em></p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../../..", "features": [], "search": "../../../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../../assets/javascripts/bundle.92b07e13.min.js"></script>
      
    
  </body>
</html>